<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ðŸŒ² Green Forest Quiz - Multiplayer</title>
<style>
body {font-family: Arial, sans-serif; background: linear-gradient(180deg,#dff6e8,#c9efd6); margin: 0; padding: 0; text-align: center;}
.container {max-width: 900px; margin: 30px auto; background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 16px rgba(0,0,0,0.1);}
button {background: #2f7a3e; color: white; border: none; border-radius: 6px; padding: 10px 18px; cursor: pointer; margin: 5px;}
button:hover {background: #256331;}
input {padding: 8px; border-radius: 6px; border: 1px solid #ccc; width: 70%;}
.card {background: #f6fff6; border: 1px solid #d7efdc; border-radius: 8px; padding: 10px; margin: 10px auto;}
</style>
</head>
<body>
<div class="container">
<h2>ðŸŒ² Green Forest Quiz â€” Online Multiplayer</h2>
<p>Create or join a room to play live with friends!</p>

<div>
<input id="roomId" placeholder="Enter room name (e.g., forest-room-1)">
<br>
<button id="hostBtn">Host Room</button>
<button id="joinBtn">Join Room</button>
</div>

<div id="roomSection" style="display:none;">
<h3 id="roomName"></h3>
<div id="playersList" class="card"></div>
<div>
<input id="messageInput" placeholder="Type message...">
<button id="sendBtn">Send</button>
</div>
<div id="messages" class="card" style="height:200px; overflow-y:auto;"></div>
</div>

<hr>
<p>To share this game: upload this file to GitHub as <strong>index.html</strong> in your FOREST repo.<br>Then visit: <a href="https://shalom30012-glitch.github.io/FOREST/" target="_blank">https://shalom30012-glitch.github.io/FOREST/</a></p>
</div>

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script>
let peer, connections = [], conn;
let isHost = false;

function log(msg) {
  const p = document.createElement('div');
  p.textContent = msg;
  document.getElementById('messages').appendChild(p);
}

function updatePlayers() {
  const list = connections.map(c => c.peer).join('<br>');
  document.getElementById('playersList').innerHTML = `<strong>Players:</strong><br>${list}`;
}

document.getElementById('hostBtn').onclick = () => {
  const room = document.getElementById('roomId').value.trim();
  if(!room) return alert('Enter room name');
  isHost = true;
  peer = new Peer(room);
  peer.on('open', id => {
    document.getElementById('roomSection').style.display = 'block';
    document.getElementById('roomName').innerText = `Hosting Room: ${id}`;
    log('Waiting for players...');
  });
  peer.on('connection', c => {
    connections.push(c);
    log(`Player joined: ${c.peer}`);
    updatePlayers();
    c.on('data', d => {
      log(`${c.peer}: ${d}`);
      connections.forEach(conn => conn.send(`${c.peer}: ${d}`));
    });
  });
};

document.getElementById('joinBtn').onclick = () => {
  const room = document.getElementById('roomId').value.trim();
  if(!room) return alert('Enter room name');
  peer = new Peer();
  conn = peer.connect(room);
  conn.on('open', () => {
    document.getElementById('roomSection').style.display = 'block';
    document.getElementById('roomName').innerText = `Joined Room: ${room}`;
    log('Connected to host.');
  });
  conn.on('data', d => log(d));
};

document.getElementById('sendBtn').onclick = () => {
  const text = document.getElementById('messageInput').value.trim();
  if(!text) return;
  if(isHost) {
    log(`Host: ${text}`);
    connections.forEach(c => c.send(`Host: ${text}`));
  } else if(conn && conn.open) {
    conn.send(text);
    log(`You: ${text}`);
  }
  document.getElementById('messageInput').value = '';
};
</script>
</body>
</html>
